{% extends "base.html" %}
{% block content %}
<h1>Booking Details</h1>
<div style="border: 1px solid #ddd; padding: 16px;">
    <h2>{{ booking.campervan.name }}</h2>
    <p><strong>Start Date:</strong> {{ booking.start_date }}</p>
    <p><strong>End Date:</strong> {{ booking.end_date }}</p>
    <p><strong>Total Price:</strong> ${{ booking.total_price }}</p>
    <p><strong>Status:</strong> {{ booking.status }}</p>
    
    {% if booking.start_date > today %}
        {# For future bookings, show appropriate action buttons #}
        {% if booking.status == "Pending" %}
            <a href="{% url 'create_checkout_session' booking.id %}" class="btn btn-success" style="padding: 6px; background-color: #ff9900; color: white; text-decoration: none; border-radius: 3px;">
                Pay Now
            </a>
            <a href="{% url 'edit_booking' booking.id %}" class="btn btn-primary" style="padding: 6px; background-color: #28a745; color: white; text-decoration: none; border-radius: 3px; margin-top: 10px;">
                Change Dates
            </a>
            <a href="{% url 'cancel_booking' booking.id %}" class="btn btn-danger" style="padding: 6px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 3px; margin-top: 10px; margin-left: 10px;">
                Cancel Reservation
            </a>
        {% elif booking.status == "Confirmed" %}
            <a href="{% url 'request_date_change' booking.id %}" class="btn btn-primary" style="padding: 6px; background-color: #007bff; color: white; text-decoration: none; border-radius: 3px;">
                Request Date Change
            </a>
            <a href="{% url 'request_cancellation' booking.id %}" class="btn btn-danger" style="padding: 6px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 3px; margin-left: 10px;">
                Request Cancellation
            </a>
        {% endif %}
    {% else %}
         <p class="text-muted">Ongoing or past booking â€“ if you need assistance please visit our <a href="{% url 'contact' %}">contact page</a>.</p>
    {% endif %}
    
    <p style="margin-top: 10px;">
        <a href="{% url 'my_bookings' %}" class="btn btn-secondary" style="padding: 6px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 3px;">
            Back to My Bookings
        </a>
    </p>
</div>
{% endblock %}